{"remainingRequest":"/home/jenkins/jenkins-slave/workspace/Knox-1.4.0/gateway-admin-ui/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--3-1!/home/jenkins/jenkins-slave/workspace/Knox-1.4.0/gateway-admin-ui/node_modules/ng2-bs3-modal/modal/modal.js","dependencies":[{"path":"/home/jenkins/jenkins-slave/workspace/Knox-1.4.0/gateway-admin-ui/node_modules/ng2-bs3-modal/modal/modal.js","mtime":1507232018000},{"path":"/home/jenkins/jenkins-slave/workspace/Knox-1.4.0/gateway-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jenkins/jenkins-slave/workspace/Knox-1.4.0/gateway-admin-ui/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1519266497000}],"contextDependencies":[],"result":["import { Component, Input, Output, EventEmitter, ElementRef, HostBinding, NgZone } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { Subject } from 'rxjs/Subject';\nimport 'rxjs/add/observable/fromEvent';\nimport 'rxjs/add/observable/merge';\nimport 'rxjs/add/observable/of';\nimport 'rxjs/add/observable/zip';\nimport 'rxjs/add/operator/do';\nimport 'rxjs/add/operator/filter';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/share';\nimport 'rxjs/add/operator/take';\nimport 'rxjs/add/operator/toPromise';\nimport { BsModalHideType, BsModalSize } from './models';\nimport { BsModalService } from './modal-service';\nvar EVENT_SUFFIX = 'ng2-bs3-modal';\nvar SHOW_EVENT_NAME = \"show.bs.modal.\" + EVENT_SUFFIX;\nvar SHOWN_EVENT_NAME = \"shown.bs.modal.\" + EVENT_SUFFIX;\nvar HIDE_EVENT_NAME = \"hide.bs.modal.\" + EVENT_SUFFIX;\nvar HIDDEN_EVENT_NAME = \"hidden.bs.modal.\" + EVENT_SUFFIX;\nvar LOADED_EVENT_NAME = \"loaded.bs.modal.\" + EVENT_SUFFIX;\nvar DATA_KEY = 'bs.modal';\nvar BsModalComponent = /*@__PURE__*/ (function () {\n    function BsModalComponent(element, service, zone) {\n        var _this = this;\n        this.element = element;\n        this.service = service;\n        this.zone = zone;\n        this.overrideSize = null;\n        this.onInternalClose$ = new Subject();\n        this.subscriptions = [];\n        this.visible = false;\n        this.showing = false;\n        this.hiding = false;\n        this.animation = true;\n        this.backdrop = true;\n        this.keyboard = true;\n        this.onShow = new EventEmitter();\n        this.onOpen = new EventEmitter();\n        this.onHide = new EventEmitter();\n        this.onClose = new EventEmitter();\n        this.onDismiss = new EventEmitter();\n        this.onLoaded = new EventEmitter();\n        this.setVisible = function (isVisible) {\n            return function () {\n                _this.visible = isVisible;\n                _this.showing = false;\n                _this.hiding = false;\n            };\n        };\n        this.setOptions = function (options) {\n            var backdrop = options.backdrop;\n            if (typeof backdrop === 'string' && backdrop !== 'static')\n                backdrop = true;\n            if (options.backdrop !== undefined)\n                _this.options.backdrop = backdrop;\n            if (options.keyboard !== undefined)\n                _this.options.keyboard = options.keyboard;\n        };\n        this.service.add(this);\n        this.init();\n    }\n    Object.defineProperty(BsModalComponent.prototype, \"options\", {\n        get: function () {\n            if (!this.$modal)\n                this.init();\n            return this.$modal.data(DATA_KEY).options;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BsModalComponent.prototype, \"fadeClass\", {\n        get: function () { return this.animation; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BsModalComponent.prototype, \"modalClass\", {\n        get: function () { return true; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BsModalComponent.prototype, \"roleAttr\", {\n        get: function () { return 'dialog'; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(BsModalComponent.prototype, \"tabindexAttr\", {\n        get: function () { return '-1'; },\n        enumerable: true,\n        configurable: true\n    });\n    BsModalComponent.prototype.ngOnInit = function () {\n        this.wireUpEventEmitters();\n    };\n    BsModalComponent.prototype.ngAfterViewInit = function () {\n        this.$dialog = this.$modal.find('.modal-dialog');\n    };\n    BsModalComponent.prototype.ngOnChanges = function () {\n        this.setOptions({\n            backdrop: this.backdrop,\n            keyboard: this.keyboard\n        });\n    };\n    BsModalComponent.prototype.ngOnDestroy = function () {\n        this.onInternalClose$.next(BsModalHideType.Destroy);\n        return this.destroy();\n    };\n    BsModalComponent.prototype.focus = function () {\n        this.$modal.trigger('focus');\n    };\n    BsModalComponent.prototype.routerCanDeactivate = function () {\n        this.onInternalClose$.next(BsModalHideType.RouteChange);\n        return this.destroy();\n    };\n    BsModalComponent.prototype.open = function (size) {\n        this.overrideSize = null;\n        if (BsModalSize.isValidSize(size))\n            this.overrideSize = size;\n        return this.show().toPromise();\n    };\n    BsModalComponent.prototype.close = function (value) {\n        var _this = this;\n        this.onInternalClose$.next(BsModalHideType.Close);\n        return this.hide()\n            .do(function () { return _this.onClose.emit(value); })\n            .toPromise()\n            .then(function () { return value; });\n    };\n    BsModalComponent.prototype.dismiss = function () {\n        this.onInternalClose$.next(BsModalHideType.Dismiss);\n        return this.hide().toPromise();\n    };\n    BsModalComponent.prototype.getCssClasses = function () {\n        var classes = [];\n        if (this.isSmall()) {\n            classes.push('modal-sm');\n        }\n        if (this.isLarge()) {\n            classes.push('modal-lg');\n        }\n        if (this.cssClass) {\n            classes.push(this.cssClass);\n        }\n        return classes.join(' ');\n    };\n    BsModalComponent.prototype.isSmall = function () {\n        return this.overrideSize !== BsModalSize.Large\n            && this.size === BsModalSize.Small\n            || this.overrideSize === BsModalSize.Small;\n    };\n    BsModalComponent.prototype.isLarge = function () {\n        return this.overrideSize !== BsModalSize.Small\n            && this.size === BsModalSize.Large\n            || this.overrideSize === BsModalSize.Large;\n    };\n    BsModalComponent.prototype.show = function () {\n        var _this = this;\n        if (this.visible && !this.hiding)\n            return Observable.of(null);\n        this.showing = true;\n        return Observable.create(function (o) {\n            _this.onShown$.take(1).subscribe(function (next) {\n                o.next(next);\n                o.complete();\n            });\n            _this.transitionFix();\n            _this.$modal.modal('show');\n        });\n    };\n    BsModalComponent.prototype.transitionFix = function () {\n        var _this = this;\n        // Fix for shown.bs.modal not firing when .fade is present\n        // https://github.com/twbs/bootstrap/issues/11793\n        if (this.animation) {\n            setTimeout(function () {\n                _this.$modal.trigger('focus').trigger(SHOWN_EVENT_NAME);\n            }, $.fn.modal['Constructor'].TRANSITION_DURATION);\n        }\n    };\n    BsModalComponent.prototype.hide = function () {\n        var _this = this;\n        if (!this.visible && !this.showing)\n            return Observable.of(null);\n        this.hiding = true;\n        return Observable.create(function (o) {\n            _this.onHidden$.take(1).subscribe(function (next) {\n                o.next(next);\n                o.complete();\n            });\n            _this.$modal.modal('hide');\n        });\n    };\n    BsModalComponent.prototype.init = function () {\n        var _this = this;\n        this.$modal = jQuery(this.element.nativeElement);\n        this.$modal.appendTo(document.body);\n        this.$modal.modal({\n            show: false\n        });\n        this.onShowEvent$ = Observable.fromEvent(this.$modal, SHOW_EVENT_NAME);\n        this.onShownEvent$ = Observable.fromEvent(this.$modal, SHOWN_EVENT_NAME);\n        this.onHideEvent$ = Observable.fromEvent(this.$modal, HIDE_EVENT_NAME);\n        this.onHiddenEvent$ = Observable.fromEvent(this.$modal, HIDDEN_EVENT_NAME);\n        this.onLoadedEvent$ = Observable.fromEvent(this.$modal, LOADED_EVENT_NAME);\n        var onClose$ = Observable\n            .merge(this.onInternalClose$, this.service.onBackdropClose$, this.service.onKeyboardClose$);\n        this.onHide$ = Observable.zip(this.onHideEvent$, onClose$)\n            .map(function (x) { return ({ event: x[0], type: x[1] }); });\n        this.onHidden$ = Observable.zip(this.onHiddenEvent$, onClose$)\n            .map(function (x) { return x[1]; })\n            .do(this.setVisible(false))\n            .do(function () { return _this.service.focusNext(); })\n            .share();\n        this.onShown$ = this.onShownEvent$\n            .do(this.setVisible(true))\n            .share();\n        this.onDismiss$ = this.onHidden$\n            .filter(function (x) { return x !== BsModalHideType.Close; });\n        // Start watching for events\n        (_a = this.subscriptions).push.apply(_a, [\n            this.onShown$.subscribe(function () { }),\n            this.onHidden$.subscribe(function () { }),\n            this.service.onModalStack$.subscribe(function () { })\n        ]);\n        var _a;\n    };\n    BsModalComponent.prototype.wireUpEventEmitters = function () {\n        this.wireUpEventEmitter(this.onShow, this.onShowEvent$);\n        this.wireUpEventEmitter(this.onOpen, this.onShown$);\n        this.wireUpEventEmitter(this.onHide, this.onHide$);\n        this.wireUpEventEmitter(this.onDismiss, this.onDismiss$);\n        this.wireUpEventEmitter(this.onLoaded, this.onLoadedEvent$);\n    };\n    BsModalComponent.prototype.wireUpEventEmitter = function (emitter, stream$) {\n        var _this = this;\n        if (emitter.observers.length === 0)\n            return;\n        var sub = stream$.subscribe(function (next) {\n            _this.zone.run(function () {\n                emitter.next(next);\n            });\n        });\n        this.subscriptions.push(sub);\n    };\n    BsModalComponent.prototype.destroy = function () {\n        var _this = this;\n        return this.hide().do(function () {\n            _this.service.remove(_this);\n            _this.subscriptions.forEach(function (s) { return s.unsubscribe(); });\n            _this.subscriptions = [];\n            if (_this.$modal) {\n                _this.$modal.data(DATA_KEY, null);\n                _this.$modal.remove();\n                _this.$modal = null;\n            }\n        }).toPromise();\n    };\n    return BsModalComponent;\n}());\nexport { BsModalComponent };\n//# sourceMappingURL=modal.js.map \n",null]}